version: '3.8'

services:
  mysql:
    image: mysql:8.0  # 사용할 MySQL 이미지 버전 (예: 8.0, 5.7 등)
    container_name: mysql-container # 컨테이너 이름 (선택 사항)
    environment:
      MYSQL_ROOT_PASSWORD:    # MySQL root 계정 비밀번호 (필수)
      MYSQL_DATABASE:        # 초기 데이터베이스 생성 (선택 사항)
      MYSQL_PASSWORD:            # 초기 사용자 비밀번호 (선택 사항)
    ports:
      - "3306:3306"  # 호스트의 3306 포트를 컨테이너의 3306 포트에 매핑
    volumes:
      - mysql_data:/var/lib/mysql  # 데이터 영구 저장을 위한 볼륨 마운트
    healthcheck:
      test: ["CMD", "mysqladmin", "ping", "-h", "localhost", "-u", "root", "-p${MYSQL_ROOT_PASSWORD}"]
      timeout: 20s
      retries: 3

volumes:
  mysql_data: # 명명된 볼륨 정의